<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://unpkg.com/ar.js/aframe/build/aframe-ar.js"></script>
    <title>React AR App</title>
</head>

<body>
    <a-scene embedded arjs='sourceType: webcam; debugUIEnabled: false;'>
        <a-marker preset="hiro">
            <!-- <a-box id="dynamic-box" position="0 0.5 0" material="color: black;"></a-box> -->
            <a-entity id="dynamic-shape"></a-entity>
        </a-marker>
        <a-entity camera></a-entity>
    </a-scene>

    <script>
        window.addEventListener('message', function (event) {
            if (event.data.type === 'CHANGE_SIZE') {
                var shape = document.getElementById('dynamic-shape');
                if (shape) {
                    var scaleFactor = parseFloat(event.data.size);
                    shape.setAttribute('scale', `${scaleFactor} ${scaleFactor} ${scaleFactor}`);
                }
            } else if (event.data.type === 'CHANGE_COLOR') {
                var shape = document.getElementById('dynamic-shape');
                if (shape) {
                    shape.setAttribute('material', 'color', event.data.color);
                }
            } else if (event.data.type === 'CHANGE_SHAPE') {
                var shape = document.getElementById('dynamic-shape');
                if (shape) {
                    switch (event.data.shape) {
                        case 'box':
                            shape.setAttribute('geometry', 'primitive: box');
                            break;
                        case 'sphere':
                            shape.setAttribute('geometry', 'primitive: sphere');
                            break;
                    }
                }
            }
        });
    </script>


    <div id="root"></div>
</body>

</html>